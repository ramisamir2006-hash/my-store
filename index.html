import telebot
from telebot import types
import json
from datetime import datetime

# --- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø±Ø¨Ø· ---
TOKEN = "8234943697:AAEKiDTuNJMgBF7XySjvimPzHcPRrIo_DuE"
CHANNEL_ID = -1003223634521       
ADMIN_ID = 7020070481             

# Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† (ÙŠÙØ¶Ù„ Ù…Ø³ØªÙ‚Ø¨Ù„Ø§Ù‹ ØªØ®Ø²ÙŠÙ†Ù‡Ø§ ÙÙŠ Ù…Ù„Ù JSON Ø£Ùˆ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª)
staff_list = [] 

bot = telebot.TeleBot(TOKEN)

# --- 1. Ù„ÙˆØ­Ø§Øª Ø§Ù„ØªØ­ÙƒÙ… (Keyboards) ---

def admin_keyboard():
    """Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ø¹Ø§Ù…"""
    markup = types.ReplyKeyboardMarkup(row_width=2, resize_keyboard=True)
    btns = [
        types.KeyboardButton("ğŸ“Š Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠØ©"),
        types.KeyboardButton("ğŸ“¦ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª"),
        types.KeyboardButton("ğŸ‘¥ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† (Ø¥Ø¶Ø§ÙØ©/Ø­Ø°Ù)"),
        types.KeyboardButton("â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯"),
        types.KeyboardButton("ğŸ’° Ø¶Ø¨Ø· Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª"),
        types.KeyboardButton("ğŸ›ï¸ ÙØªØ­ Ø§Ù„Ù…ØªØ¬Ø±")
    ]
    markup.add(*btns)
    return markup

def staff_keyboard():
    """Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†"""
    markup = types.ReplyKeyboardMarkup(row_width=2, resize_keyboard=True)
    btns = [
        types.KeyboardButton("ğŸ“¦ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª"),
        types.KeyboardButton("ğŸ’¬ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª"),
        types.KeyboardButton("ğŸ›ï¸ ÙØªØ­ Ø§Ù„Ù…ØªØ¬Ø±")
    ]
    markup.add(*btns)
    return markup

def user_keyboard():
    """Ù„ÙˆØ­Ø© Ø§Ù„Ø²Ø¨Ø§Ø¦Ù† (Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¹Ø§Ø¯ÙŠ)"""
    markup = types.ReplyKeyboardMarkup(row_width=2, resize_keyboard=True)
    btns = [
        types.KeyboardButton("ğŸ’ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"),
        types.KeyboardButton("ğŸ“œ Ø·Ù„Ø¨Ø§ØªÙŠ"),
        types.KeyboardButton("ğŸ“ ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§")
    ]
    markup.add(*btns)
    return markup

# --- 2. Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ---

@bot.message_handler(commands=['start'])
def start(message):
    user_id = message.from_user.id
    
    if user_id == ADMIN_ID:
        bot.send_message(
            message.chat.id, 
            "Ø£Ù‡Ù„Ø§Ù‹ ÙŠØ§ Ø±Ø§Ù…ÙŠ! ØªÙ… ØªÙØ¹ÙŠÙ„ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©.", 
            reply_markup=admin_keyboard()
        )
    elif user_id in staff_list:
        bot.send_message(
            message.chat.id, 
            "Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ (Ù…ÙˆØ¸Ù Ù…Ø³Ø¤ÙˆÙ„). Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ§Øª Ù…Ø­Ø¯ÙˆØ¯Ø©.", 
            reply_markup=staff_keyboard()
        )
    else:
        bot.send_message(
            message.chat.id, 
            "Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…Ø¬ÙˆÙ‡Ø±Ø§Øª Ø±Ø§Ù…ÙŠ Ø³Ù…ÙŠØ± âœ¨\nÙŠØ³Ø¹Ø¯Ù†Ø§ Ø®Ø¯Ù…ØªÙƒ.", 
            reply_markup=user_keyboard()
        )

# --- 3. Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù†ØµÙŠØ© (Ù…Ø«Ø§Ù„ Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ø£Ø²Ø±Ø§Ø±) ---

@bot.message_handler(func=lambda message: True)
def handle_messages(message):
    if message.text == "ğŸ“Š Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠØ©":
        if message.from_user.id == ADMIN_ID:
            bot.reply_to(message, "Ø¬Ø§Ø±ÙŠ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±... ğŸ“ˆ")
        else:
            bot.reply_to(message, "Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù‡Ø°Ø§ Ø§Ù„Ø£Ù…Ø± Ù„Ù„Ù…Ø¯ÙŠØ± ÙÙ‚Ø·.")
    
    elif message.text == "ğŸ’ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª":
        bot.send_message(message.chat.id, "Ø¥Ù„ÙŠÙƒ Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹ ğŸ’")

# ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨ÙˆØª
if __name__ == "__main__":
    print("âœ… Ø§Ù„Ø¨ÙˆØª ÙŠØ¹Ù…Ù„ Ø§Ù„Ø¢Ù† Ø¨Ù†Ø¬Ø§Ø­...")
    bot.infinity_polling()
