<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ù…ØªØ¬Ø± Ø±Ø§Ù…ÙŠ Ø³Ù…ÙŠØ±</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f0f2f5; padding: 20px; direction: rtl; }
        .admin-panel { background: white; max-width: 700px; margin: auto; padding: 30px; border-radius: 25px; box-shadow: 0 15px 35px rgba(0,0,0,0.15); border: 2px solid #d4af37; }
        h2 { color: #c2185b; text-align: center; margin-bottom: 25px; font-size: 28px; }
        label { font-weight: bold; color: #444; display: block; margin-top: 10px; }
        input, select, textarea { width: 100%; padding: 14px; margin: 8px 0; border: 1px solid #ccc; border-radius: 12px; box-sizing: border-box; font-size: 16px; transition: 0.3s; }
        input:focus { border-color: #d4af37; outline: none; box-shadow: 0 0 8px rgba(212, 175, 55, 0.3); }
        .btn-group { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; }
        button { flex: 1; padding: 16px; border: none; border-radius: 12px; cursor: pointer; font-weight: bold; font-size: 17px; transition: 0.3s; min-width: 200px; }
        .publish-btn { background: linear-gradient(45deg, #d4af37, #b8860b); color: white; }
        .publish-btn:hover { background: linear-gradient(45deg, #b8860b, #d4af37); transform: translateY(-2px); }
        .add-img-btn { background: #37474f; color: white; width: 100%; margin-top: 5px; }
        .badge { background: #d4af37; color: white; padding: 5px 12px; border-radius: 20px; font-size: 12px; float: left; }
    </style>
</head>
<body>

<div class="admin-panel">
    <span class="badge">Ù†Ø¸Ø§Ù… Ø±Ø§Ù…ÙŠ Ø³Ù…ÙŠØ± Ø§Ù„Ø°ÙƒÙŠ v2.0</span>
    <h2>ğŸ’ Ø¥Ø¯Ø§Ø±Ø© Ù…ØªØ¬Ø± Ø±Ø§Ù…ÙŠ Ø³Ù…ÙŠØ± Ù„Ù„Ø°Ù‡Ø¨</h2>
    
    <label>ğŸ¯ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬</label>
    <input type="text" id="pName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
    
    <select id="pCat">
        <option value="" disabled selected>Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù…...</option>
        <option>Ø®ÙˆØ§ØªÙ…</option><option>Ø³Ù„Ø§Ø³Ù„</option><option>Ø§Ù†Ø³ÙŠØ§Ù„Ø§Øª</option>
        <option>Ø£Ø³Ø§ÙˆØ±</option><option>Ø­Ù„Ù‚</option><option>ØºÙˆØ§ÙŠØ´</option>
    </select>

    <div class="btn-group">
        <input type="number" id="pPrice" placeholder="Ø§Ù„Ø³Ø¹Ø± Ù‚Ø·Ø§Ø¹ÙŠ">
        <input type="number" id="pWholesale" placeholder="Ø§Ù„Ø³Ø¹Ø± Ø¬Ù…Ù„Ø©">
    </div>

    <div class="btn-group">
        <input type="text" id="pSize" placeholder="Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª">
        <input type="number" id="pDiscount" placeholder="Ø§Ù„Ø®ØµÙ… %">
    </div>
    
    <label>ğŸ“¸ ØµÙˆØ± Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„</label>
    <div id="images-container">
        <input type="text" class="img-input" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±">
    </div>
    <button class="add-img-btn" onclick="addImageField()">â• Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø© Ø£Ø®Ø±Ù‰</button>
    
    <hr>
    
    <div class="btn-group">
        <button class="publish-btn" onclick="sendToBot()">âœ¨ Ù†Ø´Ø± ÙÙˆØ±ÙŠ ÙÙŠ Ø§Ù„Ù‚Ù†Ø§Ø©</button>
    </div>
</div>

<script>
    function addImageField() {
        const input = document.createElement('input');
        input.type = "text";
        input.className = 'img-input';
        input.placeholder = "Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø¥Ø¶Ø§ÙÙŠØ©";
        document.getElementById('images-container').appendChild(input);
    }

    async function sendToBot() {
        const images = Array.from(document.querySelectorAll('.img-input')).map(i => i.value).filter(v => v);
        const data = {
            name: document.getElementById('pName').value,
            category: document.getElementById('pCat').value,
            price: document.getElementById('pPrice').value,
            wholesale: document.getElementById('pWholesale').value,
            size: document.getElementById('pSize').value,
            discount: document.getElementById('pDiscount').value,
            images: images
        };

        if (!data.name || images.length === 0) {
            alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø§Ø³Ù… ÙˆØµÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„!");
            return;
        }

        const res = await fetch('/publish', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
        });

        const result = await res.json();
        if (result.success) alert("âœ… ØªÙ… Ø§Ù„Ù†Ø´Ø± Ø¨Ù†Ø¬Ø§Ø­!");
        else alert("âŒ Ø®Ø·Ø£: " + result.error);
    }
</script>
</body>
</html>
