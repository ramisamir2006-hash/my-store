    function addImageField() {
        const input = document.createElement('input');
        input.type = "text";
        input.className = 'img-input';
        input.placeholder = "رابط صورة إضافية";
        document.getElementById('images-container').appendChild(input);
    }

    async function handleAction(endpoint) {
        const images = Array.from(document.querySelectorAll('.img-input')).map(i => i.value).filter(v => v);
        
        // تجميع بيانات المنتج من الحقول
        const productData = {
            name: document.getElementById('pName').value,
            category: document.getElementById('pCat').value,
            price: document.getElementById('pPrice').value,
            wholesale: document.getElementById('pWholesale').value,
            size: document.getElementById('pSize').value,
            discount: document.getElementById('pDiscount').value,
            images: images
        };

        if (!productData.name || images.length === 0) {
            alert("يرجى إدخال اسم المنتج وصورة واحدة على الأقل!");
            return;
        }

        // إرسال البيانات إلى البوت (السيرفر)
        try {
            const response = await fetch('/publish', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(productData)
            });
            
            const result = await response.json();
            if (result.success) {
                alert("✅ تم النشر بنجاح في قناة رامي سمير!");
            } else {
                alert("❌ فشل النشر: " + result.error);
            }
        } catch (err) {
            alert("❌ حدث خطأ في الاتصال بالسيرفر!");
        }
    }
    
